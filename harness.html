<html>
<head>
<title>Badi JS Test Page</title>
<meta charset="UTF-8">

<style type="text/css">
.success {
  color: green;
}
.fail {
  color: red;
}

</style>

<script src="stellafane.js"></script>
<script src="suncalc.js"></script>
<script src="blueyonder/blueyonder.js"></script>
<script src="badi.js" charset="utf-8"></script>

<script src="https://code.jquery.com/jquery-1.11.2.min.js"></script>
<script>
//This is the code for testing against the UHJ-provided table of dates
naw_ruz = [
	"21 Mar 2015",
	"20 Mar 2016",
	"20 Mar 2017",
	"21 Mar 2018",
	"21 Mar 2019",
	"20 Mar 2020",
	"20 Mar 2021",
	"21 Mar 2022",
	"21 Mar 2023",
	"20 Mar 2024",
	"20 Mar 2025",
	"21 Mar 2026",
	"21 Mar 2027",
	"20 Mar 2028",
	"20 Mar 2029",
	"20 Mar 2030",
	"21 Mar 2031",
	"20 Mar 2032",
	"20 Mar 2033",
	"20 Mar 2034",
	"21 Mar 2035",
	"20 Mar 2036",
	"20 Mar 2037",
	"20 Mar 2038",
	"21 Mar 2039",
	"20 Mar 2040",
	"20 Mar 2041",
	"20 Mar 2042",
	"21 Mar 2043",
	"20 Mar 2044",
	"20 Mar 2045",
	"20 Mar 2046",
	"21 Mar 2047",
	"20 Mar 2048",
	"20 Mar 2049",
	"20 Mar 2050",
	"21 Mar 2051",
	"20 Mar 2052",
	"20 Mar 2053",
	"20 Mar 2054",
	"21 Mar 2055",
	"20 Mar 2056",
	"20 Mar 2057",
	"20 Mar 2058",
	"20 Mar 2059",
	"20 Mar 2060",
	"20 Mar 2061",
	"20 Mar 2062",
	"20 Mar 2063",
	"20 Mar 2064"
];

var success_count = 0;
var failure_count = 0;

function start() {
  $("#output").append("<ul>");
}

function finish() {
  if(failure_count == 0) {
    success("All " + success_count + " tests pass!");
  } else {
    failure(success_count + " tests passed; " + failure_count + " tests failed.");
  }
  $("#output").append("</ul>");
}

function failure(m) {
  failure_count = failure_count + 1;
  $("#output").append("<li class='fail'>" + m + "</li>");
}

function success(m) {
  success_count = success_count + 1;
  $("#output").append("<li class='success'>" + m + "</li>");
}

function header(m) {
  $("#output").append("</ul><h3>" + m + "</h3><ul>");
}

function test_nawruz() {
  header("Naw-Ruz tests");
  for(var i = 0; i < naw_ruz.length; i++) {
    var expected = new Date(naw_ruz[i]);
    var year = expected.getFullYear();
    var actual = find_naw_ruz(year);
    if(expected.getTime() == actual.getTime()) {
      success("Naw-Ruz correct for " + year + ".");
    } else {
      failure("Naw-Ruz in " + year + " is on " + expected + " but computed " + actual + ".");
    }
  }
}

$(window).load(function() {
  start();
  test_nawruz();
  finish();
});
</script>
</head>
<body>
<h1>Badi Calendar Tests</h1>
<div id="output">
</div>
</body>
</html>
